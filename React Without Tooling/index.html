<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Project Listing</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
        <script
            src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
            crossorigin
        ></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

        <script type="text/babel">
            function ProjectsList() {
                const [projects, setProjects] = React.useState();

                React.useEffect(() => {
                    fetchProjects();
                }, []);

                const fetchProjects = async () => {
                    const response = await fetch("https://sheetlabs.com/CRES/project_list");
                    const projects = await response.json();
                    setProjects(projects);
                };

                console.log("Yo");

                return (
                    projects?.length &&
                    projects.map((project, index) => (
                        <li
                            className="relative bg-gray-100 flex flex-col grow justify-between rounded-md p-4 sm:w-full lg:w-1/4 group"
                            key={index}
                        >
                            <div>
                                <h3 className="text-2xl font-medium">
                                    {project.ProjectId}: {project.Name}
                                </h3>
                                <div className="my-4">
                                    <div className="font-bold">Description:</div>
                                    {project.Description}
                                </div>
                            </div>
                            <div>
                                <div className="flex w-full justify-between group-hover:opacity-0 transition duration-500">
                                    <div>
                                        <h3 className="font-bold">Budget</h3>
                                        <div className="bg-cyan-500 rounded-full px-3 mt-1 text-white">
                                            {project.Budget}
                                        </div>
                                    </div>
                                    <div>
                                        <h3 className="font-bold">Timeline</h3>
                                        <div className="bg-emerald-500 rounded-full px-3 mt-1 text-white">
                                            {project.Timeline}
                                        </div>
                                    </div>
                                </div>
                                <a className="absolute left-0 w-full cursor-pointer bg-gradient-to-r from-cyan-500 to-emerald-500 text-white rounded-md text-center py-2 mt-4 opacity-0 group-hover:-translate-y-full group-hover:opacity-100 transition duration-500 ease-in-out">
                                    Apply Now
                                </a>
                            </div>
                        </li>
                    ))
                );
            }

            const domContainer = document.querySelector("#list");
            const root = ReactDOM.createRoot(domContainer);
            root.render(<ProjectsList />);
        </script>
    </head>
    <body class="flex justify-center">
        <div class="container-2xl mt-10 mx-auto w-3/4">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl">Project Listings</h1>
                <a
                    href="./projects/add.html"
                    class="bg-green-600 font-semibold text-white text-md px-4 py-2 rounded-md cursor-pointer"
                    >Add Project</a
                >
            </div>
            <form
                id="search_form"
                class="flex items-center border-2 border-gray-300 rounded-full my-4 px-4"
            >
                <input
                    type="text"
                    placeholder="Search"
                    id="search_input"
                    class="py-2 w-full focus:outline-none"
                    type="submit"
                />
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="30px"
                    height="30px"
                    viewBox="0 0 24 24"
                >
                    <path
                        class="fill-gray-400"
                        d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5l-1.5 1.5l-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16A6.5 6.5 0 0 1 3 9.5A6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14S14 12 14 9.5S12 5 9.5 5"
                    />
                </svg>
            </form>
            <ul id="list" class="flex flex-wrap justify-start gap-2"></ul>
        </div>
    </body>
</html>
